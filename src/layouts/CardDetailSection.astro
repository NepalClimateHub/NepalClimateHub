---
import { Icon } from 'astro-icon/components';
import HtmlRenderer from '../components/HtmlRenderer.astro';
import { formatDateTime } from 'src/utils/formatDateTime';
import StatusAndShare from '@components/StatusAndShare.astro';

// dataObj can either be organization data or activist data or event data; sent via props
const { dataObj, organization = "true", opportunity = false } = Astro.props;

// Check if this is an event (has different structure than organizations/activists)
const isEvent = organization === "false" && dataObj && "title" in dataObj;

// initialize activeDataObject with a proper type
const activeDataObject = dataObj;

// Get the appropriate properties based on data type
const name = isEvent ? activeDataObject?.title : activeDataObject?.name;
const location = isEvent
  ? activeDataObject?.locationType
  : activeDataObject?.address;
const description = activeDataObject?.description || "";

const eventLocation = activeDataObject?.location === "" ? 'Not disclosed' : activeDataObject?.location ;

const status = activeDataObject?.status || "";
const normalizedStatus = status.toLowerCase().trim();
const statusClass = `status-${normalizedStatus}`;

const eventType = activeDataObject?.type || "";
const cleanedType = eventType.toLowerCase().trim();

const eventFormat = activeDataObject?.format || "";
const cleanedFormat = eventFormat.replace(/_/g, '-').toLowerCase().trim();

const eventCost = activeDataObject?.cost || "";
const cleanedCost = eventCost.replace(/_/g, ' ').toLowerCase().trim();

const {date: eventStartDate, time: eventStartTime} = formatDateTime(activeDataObject?.startDate);

const opportunityDuration = activeDataObject?.duration || 'Not disclosed';

// Handle tags/categories differently based on data type
const tags = isEvent
  ? activeDataObject?.category || []
  : activeDataObject?.tags || [];

// Handle pictures differently based on data type
const pictures = isEvent
  ? [activeDataObject?.bannerImage].filter(Boolean)
  : activeDataObject?.pictures || [];

// Add extra br tag after each existing br tag for better paragraph separation
const processedDescription = description.replace(/<br\s*\/?>/gi, "<br><br>");
---

<div class="section-container">
  <!-- container for organization card -->
  <div class="card-container">

    {
      isEvent && <StatusAndShare status={normalizedStatus} statusClass={statusClass} />
    }

    <div class="card-main">
     <div class="card-details-wrapper">
      <h2 class="card-name">
        {name}
      </h2>
      <div class="address">
        <span class="icon">
          <Icon name="mdi:my-location" class="icon" />
        </span>
        {location}
      </div>
      
      <HtmlRenderer content={processedDescription} class="detail" />

      <!-- tags for organizations / activists causes -->
      <div class="tags">
        {tags.map((tag: string) => <span class="tag">{tag}</span>)}
      </div>

      <!-- {
        isEvent && activeDataObject?.registrationLink && (
          <div class="registration">
            <a
              href={activeDataObject.registrationLink}
              target="_blank"
              rel="noopener noreferrer"
              class="register-button"
            >
              Register Now
            </a>
            {activeDataObject?.registrationDeadline && (
              <p class="deadline">
                Registration Deadline:{" "}
                {new Date(
                  activeDataObject.registrationDeadline
                ).toLocaleDateString("en-US", {
                  year: "numeric",
                  month: "long",
                  day: "numeric",
                })}
              </p>
            )}
          </div>
        )
      } -->
    </div>

    <!-- image container section -->
    <div class="img-container">
      {
        pictures.length == 1 ? (
          // if length == 1, then apply single-image-wrapper class
          <div class="img-wrapper single-image-wrapper">
            <img src={pictures[0] || "/placeholder.svg"} alt="" />
          </div>
        ) : (
          pictures.map((pictureURL: string) => (
            <div class="img-wrapper">
              <img src={pictureURL || "/placeholder.svg"} alt="" />
            </div>
          ))
        )
      }
      </div>
    </div>

    {
      isEvent && (
        <div class="info-container">

        <div class="info-section">
          <h2 class="info-section-title">{opportunity ? "Location & Duration" : "Event Details"}</h2>
          
          <div class="info-item-container">

          {
            opportunity === false && (
            <div class="info-section-item">
            <div class="info-section-icon">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M6.66667 1.66666C7.1269 1.66666 7.5 2.03975 7.5 2.49999V3.33332H12.5V2.49999C12.5 2.03975 12.8731 1.66666 13.3333 1.66666C13.7936 1.66666 14.1667 2.03975 14.1667 2.49999V3.33332H15C16.3807 3.33332 17.5 4.45261 17.5 5.83332V15.8333C17.5 17.214 16.3807 18.3333 15 18.3333H5C3.61929 18.3333 2.5 17.214 2.5 15.8333V5.83332C2.5 4.45261 3.61929 3.33332 5 3.33332H5.83333V2.49999C5.83333 2.03975 6.20643 1.66666 6.66667 1.66666ZM5.83333 4.99999H5C4.53976 4.99999 4.16667 5.37309 4.16667 5.83332V8.33332H15.8333V5.83332C15.8333 5.37309 15.4602 4.99999 15 4.99999H14.1667V5.83332C14.1667 6.29356 13.7936 6.66666 13.3333 6.66666C12.8731 6.66666 12.5 6.29356 12.5 5.83332V4.99999H7.5V5.83332C7.5 6.29356 7.1269 6.66666 6.66667 6.66666C6.20643 6.66666 5.83333 6.29356 5.83333 5.83332V4.99999ZM15.8333 9.99999H4.16667V15.8333C4.16667 16.2936 4.53976 16.6667 5 16.6667H15C15.4602 16.6667 15.8333 16.2936 15.8333 15.8333V9.99999ZM8.33333 12.5C8.33333 12.0398 8.70643 11.6667 9.16667 11.6667H10C10.4602 11.6667 10.8333 12.0398 10.8333 12.5V15C10.8333 15.4602 10.4602 15.8333 10 15.8333C9.53976 15.8333 9.16667 15.4602 9.16667 15V13.3333C8.70643 13.3333 8.33333 12.9602 8.33333 12.5Z" fill="#212529"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M6.66667 1.66666C7.1269 1.66666 7.5 2.03975 7.5 2.49999V3.33332H12.5V2.49999C12.5 2.03975 12.8731 1.66666 13.3333 1.66666C13.7936 1.66666 14.1667 2.03975 14.1667 2.49999V3.33332H15C16.3807 3.33332 17.5 4.45261 17.5 5.83332V15.8333C17.5 17.214 16.3807 18.3333 15 18.3333H5C3.61929 18.3333 2.5 17.214 2.5 15.8333V5.83332C2.5 4.45261 3.61929 3.33332 5 3.33332H5.83333V2.49999C5.83333 2.03975 6.20643 1.66666 6.66667 1.66666ZM5.83333 4.99999H5C4.53976 4.99999 4.16667 5.37309 4.16667 5.83332V8.33332H15.8333V5.83332C15.8333 5.37309 15.4602 4.99999 15 4.99999H14.1667V5.83332C14.1667 6.29356 13.7936 6.66666 13.3333 6.66666C12.8731 6.66666 12.5 6.29356 12.5 5.83332V4.99999H7.5V5.83332C7.5 6.29356 7.1269 6.66666 6.66667 6.66666C6.20643 6.66666 5.83333 6.29356 5.83333 5.83332V4.99999ZM15.8333 9.99999H4.16667V15.8333C4.16667 16.2936 4.53976 16.6667 5 16.6667H15C15.4602 16.6667 15.8333 16.2936 15.8333 15.8333V9.99999ZM8.33333 12.5C8.33333 12.0398 8.70643 11.6667 9.16667 11.6667H10C10.4602 11.6667 10.8333 12.0398 10.8333 12.5V15C10.8333 15.4602 10.4602 15.8333 10 15.8333C9.53976 15.8333 9.16667 15.4602 9.16667 15V13.3333C8.70643 13.3333 8.33333 12.9602 8.33333 12.5Z" fill="black" fill-opacity="0.2"/>
              </svg>
            </div>
            <div class="info-section-content">
              <span class="info-section-label">Date</span>
              <span class="info-section-value">{eventStartDate}</span>
            </div>
          </div>
          )
          }
          <div class="info-section-item">
            <div class="info-section-icon">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0003 3.33332C6.31843 3.33332 3.33366 6.31809 3.33366 9.99999C3.33366 13.6819 6.31843 16.6667 10.0003 16.6667C13.6822 16.6667 16.667 13.6819 16.667 9.99999C16.667 6.31809 13.6822 3.33332 10.0003 3.33332ZM1.66699 9.99999C1.66699 5.39762 5.39795 1.66666 10.0003 1.66666C14.6027 1.66666 18.3337 5.39762 18.3337 9.99999C18.3337 14.6024 14.6027 18.3333 10.0003 18.3333C5.39795 18.3333 1.66699 14.6024 1.66699 9.99999ZM10.0003 4.99999C10.4606 4.99999 10.8337 5.37309 10.8337 5.83332V9.65481L13.0896 11.9107C13.415 12.2362 13.415 12.7638 13.0896 13.0892C12.7641 13.4147 12.2365 13.4147 11.9111 13.0892L9.41107 10.5892C9.25479 10.433 9.16699 10.221 9.16699 9.99999V5.83332C9.16699 5.37309 9.54009 4.99999 10.0003 4.99999Z" fill="#212529"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0003 3.33332C6.31843 3.33332 3.33366 6.31809 3.33366 9.99999C3.33366 13.6819 6.31843 16.6667 10.0003 16.6667C13.6822 16.6667 16.667 13.6819 16.667 9.99999C16.667 6.31809 13.6822 3.33332 10.0003 3.33332ZM1.66699 9.99999C1.66699 5.39762 5.39795 1.66666 10.0003 1.66666C14.6027 1.66666 18.3337 5.39762 18.3337 9.99999C18.3337 14.6024 14.6027 18.3333 10.0003 18.3333C5.39795 18.3333 1.66699 14.6024 1.66699 9.99999ZM10.0003 4.99999C10.4606 4.99999 10.8337 5.37309 10.8337 5.83332V9.65481L13.0896 11.9107C13.415 12.2362 13.415 12.7638 13.0896 13.0892C12.7641 13.4147 12.2365 13.4147 11.9111 13.0892L9.41107 10.5892C9.25479 10.433 9.16699 10.221 9.16699 9.99999V5.83332C9.16699 5.37309 9.54009 4.99999 10.0003 4.99999Z" fill="black" fill-opacity="0.2"/>
              </svg>
            </div>
            <div class="info-section-content">
              <span class="info-section-label">{opportunity ? 'Duration' : 'Time'}</span>
              <span class="info-section-value">{opportunity ? opportunityDuration : eventStartTime}</span>
            </div>
          </div>
          <div class="info-section-item">
            <div class="info-section-icon">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10 3.3336C8.84629 3.3336 7.71849 3.67571 6.75921 4.31667C5.79993 4.95763 5.05225 5.86866 4.61073 6.93454C4.16921 8.00043 4.05368 9.1733 4.27873 10.3048C4.50378 11.4364 5.05929 12.4757 5.87502 13.2915C5.87499 13.2915 5.87505 13.2916 5.87502 13.2915L9.41146 16.8271C9.56772 16.9832 9.77955 17.0709 10.0004 17.0709C10.2213 17.0709 10.4331 16.9832 10.5894 16.8271L14.1249 13.2916C14.1249 13.2916 14.1249 13.2916 14.1249 13.2916C14.9407 12.4758 15.4962 11.4364 15.7213 10.3048C15.9463 9.1733 15.8308 8.00043 15.3893 6.93454C14.9478 5.86866 14.2001 4.95763 13.2408 4.31667C12.2815 3.67571 11.1537 3.3336 10 3.3336ZM5.83327 2.93088C7.06663 2.10679 8.51666 1.66693 10 1.66693C11.4833 1.66693 12.9334 2.10679 14.1667 2.93088C15.4001 3.75498 16.3614 4.92629 16.9291 6.29672C17.4967 7.66714 17.6453 9.17512 17.3559 10.63C17.0666 12.0848 16.3523 13.4212 15.3034 14.4701L11.7676 18.0059C11.2988 18.4742 10.663 18.7376 10.0004 18.7376C9.33781 18.7376 8.70231 18.4745 8.23355 18.0062L4.69665 14.4702C3.6478 13.4213 2.93344 12.0848 2.64409 10.63C2.35473 9.17512 2.50328 7.66714 3.07094 6.29672C3.63861 4.92629 4.59991 3.75498 5.83327 2.93088ZM10 7.50002C9.07953 7.50002 8.33333 8.24622 8.33333 9.16669C8.33333 10.0872 9.07953 10.8334 10 10.8334C10.9205 10.8334 11.6667 10.0872 11.6667 9.16669C11.6667 8.24622 10.9205 7.50002 10 7.50002ZM6.66667 9.16669C6.66667 7.32574 8.15905 5.83336 10 5.83336C11.8409 5.83336 13.3333 7.32574 13.3333 9.16669C13.3333 11.0076 11.8409 12.5 10 12.5C8.15905 12.5 6.66667 11.0076 6.66667 9.16669Z" fill="#1F1F1F"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10 3.3336C8.84629 3.3336 7.71849 3.67571 6.75921 4.31667C5.79993 4.95763 5.05225 5.86866 4.61073 6.93454C4.16921 8.00043 4.05368 9.1733 4.27873 10.3048C4.50378 11.4364 5.05929 12.4757 5.87502 13.2915C5.87499 13.2915 5.87505 13.2916 5.87502 13.2915L9.41146 16.8271C9.56772 16.9832 9.77955 17.0709 10.0004 17.0709C10.2213 17.0709 10.4331 16.9832 10.5894 16.8271L14.1249 13.2916C14.1249 13.2916 14.1249 13.2916 14.1249 13.2916C14.9407 12.4758 15.4962 11.4364 15.7213 10.3048C15.9463 9.1733 15.8308 8.00043 15.3893 6.93454C14.9478 5.86866 14.2001 4.95763 13.2408 4.31667C12.2815 3.67571 11.1537 3.3336 10 3.3336ZM5.83327 2.93088C7.06663 2.10679 8.51666 1.66693 10 1.66693C11.4833 1.66693 12.9334 2.10679 14.1667 2.93088C15.4001 3.75498 16.3614 4.92629 16.9291 6.29672C17.4967 7.66714 17.6453 9.17512 17.3559 10.63C17.0666 12.0848 16.3523 13.4212 15.3034 14.4701L11.7676 18.0059C11.2988 18.4742 10.663 18.7376 10.0004 18.7376C9.33781 18.7376 8.70231 18.4745 8.23355 18.0062L4.69665 14.4702C3.6478 13.4213 2.93344 12.0848 2.64409 10.63C2.35473 9.17512 2.50328 7.66714 3.07094 6.29672C3.63861 4.92629 4.59991 3.75498 5.83327 2.93088ZM10 7.50002C9.07953 7.50002 8.33333 8.24622 8.33333 9.16669C8.33333 10.0872 9.07953 10.8334 10 10.8334C10.9205 10.8334 11.6667 10.0872 11.6667 9.16669C11.6667 8.24622 10.9205 7.50002 10 7.50002ZM6.66667 9.16669C6.66667 7.32574 8.15905 5.83336 10 5.83336C11.8409 5.83336 13.3333 7.32574 13.3333 9.16669C13.3333 11.0076 11.8409 12.5 10 12.5C8.15905 12.5 6.66667 11.0076 6.66667 9.16669Z" fill="black" fill-opacity="0.2"/>
              </svg>
            </div>
            <div class="info-section-content">
              <span class="info-section-label">Location</span>
              <span class="info-section-value">{eventLocation}</span>
            </div>
          </div>
          </div>
        </div>
        
        <div class="info-section">
        <h2 class="info-section-title">Additional Information</h2>

        <div class="info-item-container">
          <div class="info-section-item">
            <div class="info-section-icon">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M3.47631 3.47631C4.10143 2.85119 4.94928 2.5 5.83333 2.5H9.04917C9.71733 2.50026 10.3584 2.76577 10.8309 3.2382L17.595 10.0015C17.595 10.0015 17.595 10.0015 17.595 10.0015C17.8292 10.2356 18.0149 10.5135 18.1416 10.8194C18.2683 11.1253 18.3335 11.4531 18.3335 11.7842C18.3335 12.1152 18.2683 12.4431 18.1416 12.7489C18.0149 13.0548 17.8292 13.3327 17.5951 13.5668M17.5951 13.5668L13.5668 17.595C13.5668 17.5951 13.5668 17.595 13.5668 17.595C13.3327 17.8291 13.0548 18.0149 12.7489 18.1416C12.4431 18.2683 12.1152 18.3335 11.7842 18.3335C11.4531 18.3335 11.1253 18.2683 10.8194 18.1416C10.5136 18.0149 10.2357 17.8292 10.0016 17.5951C10.0016 17.5951 10.0016 17.5951 10.0016 17.5951L3.23824 10.8318C2.76512 10.3586 2.5 9.71743 2.5 9.04917V5.83333C2.5 4.94928 2.85119 4.10143 3.47631 3.47631M5.83333 4.16667C5.39131 4.16667 4.96738 4.34226 4.65482 4.65482C4.34226 4.96738 4.16667 5.39131 4.16667 5.83333V9.04917C4.16667 9.2759 4.25655 9.49304 4.41676 9.65324L11.1801 16.4166C11.2594 16.4959 11.3536 16.5589 11.4573 16.6018C11.5609 16.6448 11.672 16.6668 11.7842 16.6668C11.8963 16.6668 12.0074 16.6448 12.1111 16.6018C12.2147 16.5589 12.3089 16.496 12.3882 16.4166L16.4166 12.3882C16.4959 12.3089 16.5589 12.2147 16.6018 12.1111C16.6448 12.0074 16.6668 11.8963 16.6668 11.7842C16.6668 11.672 16.6448 11.5609 16.6018 11.4573C16.5589 11.3536 16.496 11.2595 16.4166 11.1801L9.65246 4.4168C9.65245 4.4168 9.65246 4.4168 9.65246 4.4168C9.49243 4.2568 9.27545 4.16684 9.04917 4.16667H5.83333ZM5.41667 7.08333C5.41667 6.16286 6.16286 5.41667 7.08333 5.41667C8.00381 5.41667 8.75 6.16286 8.75 7.08333C8.75 8.00381 8.00381 8.75 7.08333 8.75C6.16286 8.75 5.41667 8.00381 5.41667 7.08333Z" fill="#212529"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M3.47631 3.47631C4.10143 2.85119 4.94928 2.5 5.83333 2.5H9.04917C9.71733 2.50026 10.3584 2.76577 10.8309 3.2382L17.595 10.0015C17.595 10.0015 17.595 10.0015 17.595 10.0015C17.8292 10.2356 18.0149 10.5135 18.1416 10.8194C18.2683 11.1253 18.3335 11.4531 18.3335 11.7842C18.3335 12.1152 18.2683 12.4431 18.1416 12.7489C18.0149 13.0548 17.8292 13.3327 17.5951 13.5668M17.5951 13.5668L13.5668 17.595C13.5668 17.5951 13.5668 17.595 13.5668 17.595C13.3327 17.8291 13.0548 18.0149 12.7489 18.1416C12.4431 18.2683 12.1152 18.3335 11.7842 18.3335C11.4531 18.3335 11.1253 18.2683 10.8194 18.1416C10.5136 18.0149 10.2357 17.8292 10.0016 17.5951C10.0016 17.5951 10.0016 17.5951 10.0016 17.5951L3.23824 10.8318C2.76512 10.3586 2.5 9.71743 2.5 9.04917V5.83333C2.5 4.94928 2.85119 4.10143 3.47631 3.47631M5.83333 4.16667C5.39131 4.16667 4.96738 4.34226 4.65482 4.65482C4.34226 4.96738 4.16667 5.39131 4.16667 5.83333V9.04917C4.16667 9.2759 4.25655 9.49304 4.41676 9.65324L11.1801 16.4166C11.2594 16.4959 11.3536 16.5589 11.4573 16.6018C11.5609 16.6448 11.672 16.6668 11.7842 16.6668C11.8963 16.6668 12.0074 16.6448 12.1111 16.6018C12.2147 16.5589 12.3089 16.496 12.3882 16.4166L16.4166 12.3882C16.4959 12.3089 16.5589 12.2147 16.6018 12.1111C16.6448 12.0074 16.6668 11.8963 16.6668 11.7842C16.6668 11.672 16.6448 11.5609 16.6018 11.4573C16.5589 11.3536 16.496 11.2595 16.4166 11.1801L9.65246 4.4168C9.65245 4.4168 9.65246 4.4168 9.65246 4.4168C9.49243 4.2568 9.27545 4.16684 9.04917 4.16667H5.83333ZM5.41667 7.08333C5.41667 6.16286 6.16286 5.41667 7.08333 5.41667C8.00381 5.41667 8.75 6.16286 8.75 7.08333C8.75 8.00381 8.00381 8.75 7.08333 8.75C6.16286 8.75 5.41667 8.00381 5.41667 7.08333Z" fill="black" fill-opacity="0.2"/>
              </svg>
            </div>
            <div class="info-section-content">
              <span class="info-section-label">{opportunity ? 'Opportunity type': 'Event type'}</span>
              <span class="info-section-value">{cleanedType}</span>
            </div>
          </div>
          <div class="info-section-item">
            <div class="info-section-icon">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M7.50033 3.33332C6.11961 3.33332 5.00033 4.45261 5.00033 5.83332C5.00033 7.21404 6.11961 8.33332 7.50033 8.33332C8.88104 8.33332 10.0003 7.21404 10.0003 5.83332C10.0003 4.45261 8.88104 3.33332 7.50033 3.33332ZM3.33366 5.83332C3.33366 3.53214 5.19914 1.66666 7.50033 1.66666C9.80151 1.66666 11.667 3.53214 11.667 5.83332C11.667 8.13451 9.80151 9.99999 7.50033 9.99999C5.19914 9.99999 3.33366 8.13451 3.33366 5.83332ZM12.5264 2.40163C12.6405 1.95577 13.0945 1.68688 13.5404 1.80104C14.4366 2.03052 15.231 2.55177 15.7983 3.28261C16.3656 4.01345 16.6735 4.91232 16.6735 5.83749C16.6735 6.76267 16.3656 7.66154 15.7983 8.39238C15.231 9.12322 14.4366 9.64447 13.5404 9.87395C13.0945 9.98811 12.6405 9.71922 12.5264 9.27336C12.4122 8.82751 12.6811 8.37353 13.127 8.25937C13.6647 8.12168 14.1414 7.80893 14.4817 7.37043C14.8221 6.93192 15.0069 6.3926 15.0069 5.83749C15.0069 5.28239 14.8221 4.74307 14.4817 4.30456C14.1414 3.86606 13.6647 3.55331 13.127 3.41562C12.6811 3.30146 12.4122 2.84748 12.5264 2.40163ZM5.83366 13.3333C5.17062 13.3333 4.53473 13.5967 4.06589 14.0656C3.59705 14.5344 3.33366 15.1703 3.33366 15.8333V17.5C3.33366 17.9602 2.96056 18.3333 2.50033 18.3333C2.04009 18.3333 1.66699 17.9602 1.66699 17.5V15.8333C1.66699 14.7283 2.10598 13.6684 2.88738 12.887C3.66878 12.1056 4.72859 11.6667 5.83366 11.6667H9.16699C10.2721 11.6667 11.3319 12.1056 12.1133 12.887C12.8947 13.6684 13.3337 14.7283 13.3337 15.8333V17.5C13.3337 17.9602 12.9606 18.3333 12.5003 18.3333C12.0401 18.3333 11.667 17.9602 11.667 17.5V15.8333C11.667 15.1703 11.4036 14.5344 10.9348 14.0656C10.4659 13.5967 9.83003 13.3333 9.16699 13.3333H5.83366ZM14.1935 12.4167C14.3085 11.9711 14.763 11.7031 15.2086 11.8181C16.0991 12.048 16.8885 12.5661 17.4537 13.2915C18.019 14.0169 18.3284 14.9089 18.3336 15.8286L18.3337 15.8333L18.3337 17.5C18.3337 17.9602 17.9606 18.3333 17.5003 18.3333C17.0401 18.3333 16.667 17.9602 16.667 17.5V15.8358C16.6633 15.2849 16.4777 14.7505 16.139 14.3159C15.7999 13.8806 15.3263 13.5698 14.792 13.4319C14.3464 13.3168 14.0784 12.8623 14.1935 12.4167Z" fill="#212529"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M7.50033 3.33332C6.11961 3.33332 5.00033 4.45261 5.00033 5.83332C5.00033 7.21404 6.11961 8.33332 7.50033 8.33332C8.88104 8.33332 10.0003 7.21404 10.0003 5.83332C10.0003 4.45261 8.88104 3.33332 7.50033 3.33332ZM3.33366 5.83332C3.33366 3.53214 5.19914 1.66666 7.50033 1.66666C9.80151 1.66666 11.667 3.53214 11.667 5.83332C11.667 8.13451 9.80151 9.99999 7.50033 9.99999C5.19914 9.99999 3.33366 8.13451 3.33366 5.83332ZM12.5264 2.40163C12.6405 1.95577 13.0945 1.68688 13.5404 1.80104C14.4366 2.03052 15.231 2.55177 15.7983 3.28261C16.3656 4.01345 16.6735 4.91232 16.6735 5.83749C16.6735 6.76267 16.3656 7.66154 15.7983 8.39238C15.231 9.12322 14.4366 9.64447 13.5404 9.87395C13.0945 9.98811 12.6405 9.71922 12.5264 9.27336C12.4122 8.82751 12.6811 8.37353 13.127 8.25937C13.6647 8.12168 14.1414 7.80893 14.4817 7.37043C14.8221 6.93192 15.0069 6.3926 15.0069 5.83749C15.0069 5.28239 14.8221 4.74307 14.4817 4.30456C14.1414 3.86606 13.6647 3.55331 13.127 3.41562C12.6811 3.30146 12.4122 2.84748 12.5264 2.40163ZM5.83366 13.3333C5.17062 13.3333 4.53473 13.5967 4.06589 14.0656C3.59705 14.5344 3.33366 15.1703 3.33366 15.8333V17.5C3.33366 17.9602 2.96056 18.3333 2.50033 18.3333C2.04009 18.3333 1.66699 17.9602 1.66699 17.5V15.8333C1.66699 14.7283 2.10598 13.6684 2.88738 12.887C3.66878 12.1056 4.72859 11.6667 5.83366 11.6667H9.16699C10.2721 11.6667 11.3319 12.1056 12.1133 12.887C12.8947 13.6684 13.3337 14.7283 13.3337 15.8333V17.5C13.3337 17.9602 12.9606 18.3333 12.5003 18.3333C12.0401 18.3333 11.667 17.9602 11.667 17.5V15.8333C11.667 15.1703 11.4036 14.5344 10.9348 14.0656C10.4659 13.5967 9.83003 13.3333 9.16699 13.3333H5.83366ZM14.1935 12.4167C14.3085 11.9711 14.763 11.7031 15.2086 11.8181C16.0991 12.048 16.8885 12.5661 17.4537 13.2915C18.019 14.0169 18.3284 14.9089 18.3336 15.8286L18.3337 15.8333L18.3337 17.5C18.3337 17.9602 17.9606 18.3333 17.5003 18.3333C17.0401 18.3333 16.667 17.9602 16.667 17.5V15.8358C16.6633 15.2849 16.4777 14.7505 16.139 14.3159C15.7999 13.8806 15.3263 13.5698 14.792 13.4319C14.3464 13.3168 14.0784 12.8623 14.1935 12.4167Z" fill="black" fill-opacity="0.2"/>
              </svg>
            </div>
            <div class="info-section-content">
              <span class="info-section-label">{opportunity ? 'Opportunity format': 'Event format'}</span>
              <span class="info-section-value">{cleanedFormat}</span>
            </div>
          </div>
          <div class="info-section-item">
            <div class="info-section-icon">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10 1.66669C10.4602 1.66669 10.8333 2.03978 10.8333 2.50002V4.16669H11.6667C11.6787 4.16669 11.6906 4.16695 11.7026 4.16746C12.3673 4.19616 13.0083 4.42314 13.5429 4.81917C14.0776 5.2152 14.4815 5.76217 14.7026 6.38969C14.8556 6.82375 14.6277 7.29965 14.1937 7.45264C13.7596 7.60562 13.2837 7.37776 13.1307 6.94369C13.0201 6.62993 12.8182 6.35645 12.5509 6.15843C12.2879 5.96362 11.9735 5.85063 11.6469 5.83335H8.33333C7.89131 5.83335 7.46738 6.00895 7.15482 6.32151C6.84226 6.63407 6.66667 7.05799 6.66667 7.50002C6.66667 7.94205 6.84226 8.36597 7.15482 8.67853C7.46738 8.99109 7.89131 9.16669 8.33333 9.16669H11.6667C12.5507 9.16669 13.3986 9.51788 14.0237 10.143C14.6488 10.7681 15 11.616 15 12.5C15 13.3841 14.6488 14.2319 14.0237 14.857C13.3986 15.4822 12.5507 15.8334 11.6667 15.8334H10.8333V17.5C10.8333 17.9603 10.4602 18.3334 10 18.3334C9.53976 18.3334 9.16667 17.9603 9.16667 17.5V15.8334H8.33333C8.32135 15.8334 8.30936 15.8331 8.29739 15.8326C7.63266 15.8039 6.99173 15.5769 6.45709 15.1809C5.92244 14.7848 5.51855 14.2379 5.29739 13.6104C5.1444 13.1763 5.37226 12.7004 5.80633 12.5474C6.2404 12.3944 6.7163 12.6223 6.86928 13.0564C6.97986 13.3701 7.18181 13.6436 7.44913 13.8416C7.71212 14.0364 8.02655 14.1494 8.35313 14.1667H11.6667C12.1087 14.1667 12.5326 13.9911 12.8452 13.6785C13.1577 13.366 13.3333 12.942 13.3333 12.5C13.3333 12.058 13.1577 11.6341 12.8452 11.3215C12.5326 11.0089 12.1087 10.8334 11.6667 10.8334H8.33333C7.44928 10.8334 6.60143 10.4822 5.97631 9.85704C5.35119 9.23192 5 8.38408 5 7.50002C5 6.61597 5.35119 5.76812 5.97631 5.143C6.60143 4.51788 7.44928 4.16669 8.33333 4.16669H9.16667V2.50002C9.16667 2.03978 9.53976 1.66669 10 1.66669Z" fill="#212529"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10 1.66669C10.4602 1.66669 10.8333 2.03978 10.8333 2.50002V4.16669H11.6667C11.6787 4.16669 11.6906 4.16695 11.7026 4.16746C12.3673 4.19616 13.0083 4.42314 13.5429 4.81917C14.0776 5.2152 14.4815 5.76217 14.7026 6.38969C14.8556 6.82375 14.6277 7.29965 14.1937 7.45264C13.7596 7.60562 13.2837 7.37776 13.1307 6.94369C13.0201 6.62993 12.8182 6.35645 12.5509 6.15843C12.2879 5.96362 11.9735 5.85063 11.6469 5.83335H8.33333C7.89131 5.83335 7.46738 6.00895 7.15482 6.32151C6.84226 6.63407 6.66667 7.05799 6.66667 7.50002C6.66667 7.94205 6.84226 8.36597 7.15482 8.67853C7.46738 8.99109 7.89131 9.16669 8.33333 9.16669H11.6667C12.5507 9.16669 13.3986 9.51788 14.0237 10.143C14.6488 10.7681 15 11.616 15 12.5C15 13.3841 14.6488 14.2319 14.0237 14.857C13.3986 15.4822 12.5507 15.8334 11.6667 15.8334H10.8333V17.5C10.8333 17.9603 10.4602 18.3334 10 18.3334C9.53976 18.3334 9.16667 17.9603 9.16667 17.5V15.8334H8.33333C8.32135 15.8334 8.30936 15.8331 8.29739 15.8326C7.63266 15.8039 6.99173 15.5769 6.45709 15.1809C5.92244 14.7848 5.51855 14.2379 5.29739 13.6104C5.1444 13.1763 5.37226 12.7004 5.80633 12.5474C6.2404 12.3944 6.7163 12.6223 6.86928 13.0564C6.97986 13.3701 7.18181 13.6436 7.44913 13.8416C7.71212 14.0364 8.02655 14.1494 8.35313 14.1667H11.6667C12.1087 14.1667 12.5326 13.9911 12.8452 13.6785C13.1577 13.366 13.3333 12.942 13.3333 12.5C13.3333 12.058 13.1577 11.6341 12.8452 11.3215C12.5326 11.0089 12.1087 10.8334 11.6667 10.8334H8.33333C7.44928 10.8334 6.60143 10.4822 5.97631 9.85704C5.35119 9.23192 5 8.38408 5 7.50002C5 6.61597 5.35119 5.76812 5.97631 5.143C6.60143 4.51788 7.44928 4.16669 8.33333 4.16669H9.16667V2.50002C9.16667 2.03978 9.53976 1.66669 10 1.66669Z" fill="black" fill-opacity="0.2"/>
              </svg>
            </div>
            <div class="info-section-content">
              <span class="info-section-label">{opportunity ? 'Opportunity type': 'Event cost'}</span>
              <span class="info-section-value">{cleanedCost}</span>
            </div>
          </div>
        </div>
        </div>

        <div class="info-section">
          <h2 class="info-section-title">{opportunity ? 'Application Details' : 'Registration details'}</h2>
          <div class="info-section-content">
            {
              opportunity === false && (
              activeDataObject?.registrationDeadline ? (<span class="info-section-label">Registration deadline</span>
              <span class="info-section-value">{new Date(
                  activeDataObject.registrationDeadline
                ).toLocaleDateString("en-US", {
                  year: "numeric",
                  month: "long",
                  day: "numeric",
                })}</span>) : (<span class="info-section-label">
                  Sorry, the registration is not available, follow the organizers to keep yourself updated.
                </span>)
              )
            }

            {
              opportunity && (
              activeDataObject?.applicationDeadline ? (<span class="info-section-label">Application deadline</span>
              <span class="info-section-value">{new Date(
                  activeDataObject?.applicationDeadline
                ).toLocaleDateString("en-US", {
                  year: "numeric",
                  month: "long",
                  day: "numeric",
                })}</span>) : (<span class="info-section-label">
                  Sorry, the application is not available, follow the organizers to keep yourself updated.
                </span>)
              )
            }
          </div>

          {
            opportunity === false && (activeDataObject?.registrationLink && (
              <a
              href={activeDataObject.registrationLink}
              target="_blank"
              rel="noopener noreferrer"
              class="register-button"
            >
              Register
            </a>
            ))
          }

          {
            opportunity && (activeDataObject?.websiteUrl && (
              <a
              href={activeDataObject.websiteUrl}
              target="_blank"
              rel="noopener noreferrer"
              class="register-button"
            >
              Apply
            </a>
            ))
          }
         </div>
        </div>
      )
    }

  </div>
</div>

<style>
  .card-container {
    margin: 36px 0px 88px;
  }

  .card-main{
    display: flex;
    gap: 16px 32px;
  }

  .card-details-wrapper {
    width: 50%;
    border-bottom: 1px solid #cefe00;
    padding-bottom: 16px;
  }
  
  .card-name {
    font-size: 32px;
    font-weight: 700;
    line-height: 40px;
    margin-bottom: 23px;
  }

  .address,
  .event-meta {
    font-size: 14px;
    line-height: 16px;
    color: #364fc7;
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 5px;
  }

  .detail {
    margin-bottom: 36px;
    line-height: 1.6;
  }

  /* Minimal spacing for existing br tags from API */
  .detail br {
    display: block;
    margin-bottom: 1px !important;
  }

  /* Basic text styling */
  .detail {
    line-height: 1.6;
    text-align: justify;
  }

  .tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 20px;
  }

  .tag {
    display: inline-block;
    font-size: 12px;
    color: #364fc7;
    line-height: 14px;
    padding: 5px 12px;
    border: 1px solid #cefe00;
    border-radius: 16px;
  }

  .registration {
    margin-top: 20px;
  }

  .register-button {
    display: inline-block;
    width: fit-content;
    background-color: #cefe00;
    color: #1a1b1e;
    font-weight: 400;
    font-size: 14px;
    padding: 10px 20px;
    border-radius: 20px;
    text-decoration: none;
    text-align: center;
    transition: background-color 0.3s ease;
    margin-top: 16px;
  }

  .register-button:hover {
    background-color: #b8e500;
  }

  .deadline {
    font-size: 14px;
    color: #666;
    margin-top: 8px;
  }

  .img-container {
    width: 50%;
    display: flex;
    align-items: center;
  }

  .img-wrapper {
    width: 100%;
    height: auto;
    border-radius: 16px;
  }

  /* for the activist profile picture only */
  .single-image-wrapper {
    width: 100%;
    height: auto;
    margin-left: auto;
    float: right;
    border-radius: 16px;
  }

  .img-wrapper img {
    width: 100%;
    height: auto;
    object-fit: contain;
    border-radius: 16px;
  }

  .info-container {
    margin-top: 32px;
    padding: 24px;
    display: grid;
    gap: 30px;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  }
  
  .info-section{
    flex: 1
  }

  .info-section-title {
    color: #1A1B1E;
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 20px;
  }

  .info-item-container{
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .info-section-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
  }

  .info-section-content {
    display: flex;
    flex-direction: column;
  }

  .info-section-label {
    font-size: 16px;
    font-weight: 400;
    color: #1A1B1E;
  }

  .info-section-value {
    font-size: 16px;
    font-weight: 500;
    color: #1A1B1E;
    margin-top: 4px;
  }
  .info-section-value::first-letter{
    text-transform: uppercase;
  }

  /* style for responsiveness */

  @media screen and (max-width: 1200px) {
    .single-image-wrapper {
      width: 95%;
      height: 70%;
    }
  }

  @media screen and (max-width: 924px) {
    .card-main {
      flex-direction: column;
      gap: 24px;
    }

    .card-details-wrapper,
    .img-container {
      width: 100%;
    }

    .img-container {
      gap: 16px;
    }

    .img-wrapper {
      width: 46%;
    }

    .single-image-wrapper {
      width: 100%;
      height: auto;
    }
  }

  @media screen and (max-width: 768px) {
    .section-container {
      margin: 24px 24px 64px;
    }

    .img-container {
      gap: 8px;
    }

    .img-wrapper {
      width: 48%;
      height: 160px;
    }

    .single-image-wrapper {
      width: 100%;
      height: auto;
    }
  }

  @media screen and (max-width: 512px) {
    .card-main {
      flex-direction: column-reverse;
    }
  }
</style>
